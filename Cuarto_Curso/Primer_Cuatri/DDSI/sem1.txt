## Apuntes seminario 1 (como conectarse con la base de datos de la escuela (FBD))
-------------------------

# Aclaraciones

Debemos poner en el pdf qué ha hecho cada uno.
Lo suyo es elegir el lenguaje de programación que vayamos a usar en la práctica 3 -> no es necesario si queremos. Ella nos recomienda hacerlo con python pues es la que más usa -> tmb recomienda java. Ha hecho mucho hincapié en eso así que elegimso uno de los dos.
Se entrwega en un doc aparte al de las practicas (nmbre del subgrupo, nomrbe de cada uno, el leguaje que hemos elegido y por qué, elegir una bd y conectarnos a la base de datos).

Crear, meter tuplas y despues borrar(importante)

Es importante garantizar que se cierra la conexión a la base da datos, para evitar problemas futuros.

Un delete se usa solo si tenemos el elemento en todas las tablas, en una transacción basta hacer un rollback to.

Podemos usar tutoriales para hacerlo, pero tenemos que referenciarlo.

# Apuntes

Lo que realmente hacemos es conectarnos a los SGBD, por lo que cuando digamos qu enos conectamos a la BD, realmente es al SGBD.

Lo hacemos mediante los drivers que gestionan  como se realizan las transacciones. Los drivers dependen del lenguaje de programación, es decir, si progrmao en C++ necesito un driver que pueda manejarlo desde él. El driver tmb se ocupa de decidir cuando se contacta con un SGBD  u otro; está pensado para bases descentralizadas -> en nuestro caso esto no va a pasar.

Realmente, lo que vamso a usar son sentencias que, desde dentro del lenguaje, las instrucciones se transforman a sentencias de acceso a la base de datos.

CUando estemos programnado a nivel de aplicación, elegiremos la librería que nos da acceso a ese driver para poder manejarlo en leguaje de programación base. 

El listener es el que recibe todas las peticiones; toda la info que se manda y se recibe se realiza de forma usuario, es decir, cuando un codigo manda una petición abre una sesión.Es posible que el SGBD disponga de distintas sesiones abiertas del mismo usuario -> nosotros debemos tener cuidado porque no nos permite hacer mucho.

Nosotros elegimos el driver desde la aplicación y lo tendremos descargado en nuestro pc.


Drivers
______

EL mas comun es ODBC y esta implementado para todos los lenguajes conocidos y es cómodo. Suele ser la que se utiliza en la asignatura. Dependiendo del driver tendremos que gestionar más o menos. Necesitamos una librería para eso y hay enlaces para instalar las librerías.

En el caso de java, bajas el driver y lo configuras en la aplicación.

Transacciones
________________

Cuando es atómica se tiene que realizar sí o sí. Una transacción no significa que sea una única sentencia (ya sea de creación, borrado...); lo que es importante es que se hacen todas o no se hace ninguna. Las transacciones tienen que estar bien definidas, en el sentido de que estén claras. El motivo de la atomicidad es para que no haya inconsistencias en las bases de datos cuando se queda una transacción a medias por los motivos que sean.

La idea es congelar el estado de la base de datos una vez se empieza a hacer alguna de las operaciones de la transacción. Los cambios no se van a reflejar hasta que no se sabe si se vana a realizar todas las operaciones de la transacción. 

Cuando se congelan las tablas (bloquean) ninguna otra sesión puede acceder a las tablas y hacer transacciones.

Nosotros, a nivel de base de datos, debemos determinar cuándo empieza la transacción y cuándo termina; esto nos permite saber cuando la base de datos está integra. Se usan:
    - COMMIT -> es loq ue refleja los cambio en la base de datos, básicamente cuando se termina 
    - ROLLBACK -> vuelve a un estado anterior, es decir, a un commit hecho anteriormente. Ella ha dicho que vuelve al momento de empezar la transacción pero creo que supone que siempre hacemos commit despues de una transacción. Algunos SGBD tiene implementado AUTOCOMMIT y está activado -> hace un commit cuando termina una transacción del estilo insert o create -> debemos desactivarlo si lo vemos necesario (lo recomienda creo). No vuelve a un savpoint de una transacción  sino al inicio de la transaccion. Solo puedo ir a un savepoint csi uso rollback to.

    - SAVEPOINT -> es como poner un checkpoint al que volver en miedo de la ejecución de la transacción completa.
    - ROLLBACK TO -> devuelve el estado a ese savepoint.


